/**
 * ISR (Incremental Static Regeneration) Example
 * 
 * To use this approach:
 * 1. Copy this file to pages/index.tsx
 * 2. This strategy combines SSG and SSR benefits:
 *    - Page is pre-rendered at build time (fast!)
 *    - Updates periodically in background (fresh!)
 *    - Regenerates when revalidate time expires
 */

import { GetStaticProps } from 'next'
import Menu from '../components/Menu'
import Hero from '../components/Hero'
import PopularToys from '../components/PopularToys'
import DailyAdvice from '../components/DailyAdvice'
import Gallery from '../components/Gallery'
import Footer from '../components/Footer'

/**
 * ISR: Incremental Static Regeneration
 * - Runs at BUILD TIME initially
 * - After revalidate period expires, regenerates on NEXT request
 * - Best balance between SSG performance and SSR freshness
 */
export const getStaticProps: GetStaticProps = async () => {
  // Fetch data at build time (and then re-fetch after revalidate period)
  const advice = [
    "You hereby have permission to stop worrying about your checklist—doing the laundry, pumping, buying diapers—and learn to be present with your baby. Enjoy your precious moments together 😊",
    "Expect odd food habits. Offer a variety. Don't push, don't panic. They'll eat when they're hungry 👍"
  ]

  return {
    props: {
      advice
    },
    // ISR Configuration: Regenerate after 1 hour (3600 seconds)
    // Page serves cached version for 1 hour, then regenerates in background
    revalidate: 3600 // seconds
  }
}

interface HomeProps {
  advice: string[]
}

export default function Home({ advice }: HomeProps) {
  return (
    <div className="container">
      <Menu /> {/* CSR - Client side rendered */}
      <Hero /> {/* SSG - Static */}
      <PopularToys /> {/* SSG - Static */}
      <DailyAdvice advice={advice} /> {/* ISR - Incrementally regenerated */}
      <Gallery /> {/* SSG - Static */}
      <Footer /> {/* SSG - Static */}
    </div>
  )
}

// Rendering Strategy Summary:
// - ISR (Incremental Static Regeneration): DailyAdvice - regenerated hourly
// - CSR (Client-Side Rendering): Menu - interactive client components
// - SSG (Static Site Generation): Hero, PopularToys, Gallery, Footer - pre-rendered at build time

